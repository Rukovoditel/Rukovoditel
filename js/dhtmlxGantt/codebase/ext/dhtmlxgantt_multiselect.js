/*!
 * @license
 * 
 * dhtmlxGantt v.5.1.0 Stardard
 * This software is covered by GPL license. You also can obtain Commercial or Enterprise license to use it in non-GPL project - please contact sales@dhtmlx.com. Usage without proper license is prohibited.
 * 
 * (c) Dinamenta, UAB.
 * 
 */
!function(t){function e(n){if(s[n])return s[n].exports;var l=s[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,e),l.l=!0,l.exports}var s={};e.m=t,e.c=s,e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=19)}({19:function(t,e,s){t.exports=s(20)},20:function(t,e){gantt.config.multiselect=!0,gantt.config.multiselect_one_level=!1,gantt._multiselect={_selected:{},_one_level:!1,_active:!0,_first_selected_when_shift:null,getDefaultSelected:function(){var t=this.getSelected();return t.length?t[t.length-1]:null},setFirstSelected:function(t){this._first_selected_when_shift=t},getFirstSelected:function(){return this._first_selected_when_shift},isActive:function(){return this.updateState(),this._active},updateState:function(){this._one_level=gantt.config.multiselect_one_level;var t=this._active;this._active=gantt.config.multiselect,this._active!=t&&this.reset()},reset:function(){this._selected={}},setLastSelected:function(t){gantt.$data.tasksStore.silent(function(){var e=gantt.$data.tasksStore;t?e.select(t+""):e.unselect(null)})},getLastSelected:function(){var t=gantt.$data.tasksStore.getSelectedId();return t&&gantt.isTaskExists(t)?t:null},select:function(t,e){return!!(t&&gantt.callEvent("onBeforeTaskMultiSelect",[t,!0,e])&&gantt.callEvent("onBeforeTaskSelected",[t]))&&(this._selected[t]=!0,this.setLastSelected(t),this.afterSelect(t),gantt.callEvent("onTaskMultiSelect",[t,!0,e]),gantt.callEvent("onTaskSelected",[t]),!0)},toggle:function(t,e){this._selected[t]?this.unselect(t,e):this.select(t,e)},unselect:function(t,e){t&&gantt.callEvent("onBeforeTaskMultiSelect",[t,!1,e])&&(this._selected[t]=!1,this.getLastSelected()==t&&this.setLastSelected(this.getDefaultSelected()),this.afterSelect(t),gantt.callEvent("onTaskMultiSelect",[t,!1,e]),gantt.callEvent("onTaskUnselected",[t]))},isSelected:function(t){return!(!gantt.isTaskExists(t)||!this._selected[t])},getSelected:function(){var t=[];for(var e in this._selected)this._selected[e]&&gantt.isTaskExists(e)?t.push(e):this._selected[e]=!1;return t.sort(function(t,e){return gantt.getGlobalTaskIndex(t)>gantt.getGlobalTaskIndex(e)?1:-1}),t},forSelected:function(t){for(var e=this.getSelected(),s=0;s<e.length;s++)t(e[s])},isSameLevel:function(t){if(!this._one_level)return!0;var e=this.getLastSelected();return!e||(!gantt.isTaskExists(e)||!gantt.isTaskExists(t)||!(gantt.calculateTaskLevel(gantt.getTask(e))!=gantt.calculateTaskLevel(gantt.getTask(t))))},afterSelect:function(t){gantt.isTaskExists(t)&&gantt.refreshTask(t)},doSelection:function(t){if(!this.isActive())return!1;if(gantt._is_icon_open_click(t))return!1;var e=gantt.locate(t);if(!e)return!1;if(!gantt.callEvent("onBeforeMultiSelect",[t]))return!1;var s=this.getSelected(),n=this.getFirstSelected(),l=!1,i=this.getLastSelected();if(t.shiftKey?gantt.isTaskExists(this.getFirstSelected())&&null!==this.getFirstSelected()||this.setFirstSelected(e):t.ctrlKey||t.metaKey?this.isSelected(e)||this.setFirstSelected(e):this.setFirstSelected(e),t.ctrlKey||t.metaKey)e&&this.toggle(e,t);else if(t.shiftKey&&s.length)if(i){if(e){for(var a=gantt.getGlobalTaskIndex(this.getFirstSelected()),c=gantt.getGlobalTaskIndex(e),r=gantt.getGlobalTaskIndex(i),u=i;gantt.getGlobalTaskIndex(u)!==a;)this.unselect(u,t),u=a>r?gantt.getNext(u):gantt.getPrev(u);for(u=e;gantt.getGlobalTaskIndex(u)!==a;)this.select(u,t)&&!l&&(l=!0,n=u),u=a>c?gantt.getNext(u):gantt.getPrev(u)}}else i=e;else{this.isSelected(e)||this.select(e,t),s=this.getSelected();for(var g=0;g<s.length;g++)s[g]!==e&&this.unselect(s[g],t)}return this.isSelected(e)?this.setLastSelected(e):n?e==i&&this.setLastSelected(t.shiftKey?n:this.getDefaultSelected()):this.setLastSelected(null),this.getSelected().length||this.setLastSelected(null),this.getLastSelected()&&this.isSelected(this.getFirstSelected())||this.setFirstSelected(this.getLastSelected()),!0}},function(){var t=gantt.selectTask;gantt.selectTask=function(e){if(!e)return!1;var s=gantt._multiselect,n=e;return s.isActive()?(s.select(e,null)&&s.setLastSelected(e),s.setFirstSelected(s.getLastSelected())):n=t.call(this,e),n};var e=gantt.unselectTask;gantt.unselectTask=function(t){var s=gantt._multiselect,n=s.isActive();(t=t||s.getLastSelected())&&n&&(s.unselect(t,null),t==s.getLastSelected()&&s.setLastSelected(null),gantt.refreshTask(t),s.setFirstSelected(s.getLastSelected()));var l=t;return n||(l=e.call(this,t)),l},gantt.toggleTaskSelection=function(t){var e=gantt._multiselect;t&&e.isActive()&&(e.toggle(t),e.setFirstSelected(e.getLastSelected()))},gantt.getSelectedTasks=function(){var t=gantt._multiselect;return t.isActive(),t.getSelected()},gantt.eachSelectedTask=function(t){return this._multiselect.forSelected(t)},gantt.isSelectedTask=function(t){return this._multiselect.isSelected(t)},gantt.getLastSelectedTask=function(){return this._multiselect.getLastSelected()}}(),gantt.attachEvent("onTaskIdChange",function(t,e){var s=gantt._multiselect;if(!s.isActive())return!0;gantt.isSelectedTask(t)&&(s.unselect(t,null),s.select(e,null))}),gantt.attachEvent("onAfterTaskDelete",function(t,e){var s=gantt._multiselect;if(!s.isActive())return!0;s._selected[t]&&(s.unselect(t,null),s._selected[t]=!1,s.setLastSelected(s.getDefaultSelected())),s.forSelected(function(t){gantt.isTaskExists(t)||s.unselect(t,null)})}),gantt.attachEvent("onBeforeTaskMultiSelect",function(t,e,s){var n=gantt._multiselect;return!(e&&n.isActive()&&n._one_level)||n.isSameLevel(t)}),gantt.attachEvent("onTaskClick",function(t,e){return gantt._multiselect.doSelection(e)&&gantt.callEvent("onMultiSelect",[e]),!0})}});
//# sourceMappingURL=dhtmlxgantt_multiselect.js.map